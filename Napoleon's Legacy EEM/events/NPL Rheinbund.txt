## TODO do a newer version of the Rheinbund?
# Nappy sadly lost his newer version. I'm sure it was really cool, but I'm going to try and make what's here work for now.

##TODO Follow up events
#55008 - Austria sees RHB has unified, is threatened, can either go to war or let them be
#55009 - Prussia sees Austria fighting RHB, can choose to either help Austria, help RHB, or do nothing
#If Prussia helps RHB, very good chance of them agreeing to the deal to leave germany, if they fight RHB and RHB survives or reforms later that will never happen

#RHB calls Frankfurt Assembly
country_event = {
    id = 55000
    title = "EVTNAME55000"
    desc = "EVTDESC55000"
    picture = "Unite"

    trigger = {
		tag = RHB
        year = 1847
		has_global_flag = liberal_revolution_somewhere
        NOT = {
            exists = GER
            exists = NGF
            has_country_flag = fed_unifying
			has_global_flag = rheinbund_alt_formation
        }
    }

    mean_time_to_happen =  {
        months = 12
		modifier = {
            factor = 0.5
            has_country_flag = liberal_revolution_in_progress
        }
		modifier = {
            factor = 0.1
            year = 1848
        }
		modifier = {
            factor = 0.1
			has_country_flag = liberal_revolution_fired
        }
		modifier = {
            factor = 0.1
			has_country_modifier = springtime_of_nations
        }
    }

    option = {
        name = "EVTOPTA55000"
        any_pop = {
            ideology = {
                value = liberal
                factor = 0.1
            }
        }
        any_pop = {
            militancy = 3
            consciousness = 2
        }
        FRA = {
            set_variable = {
                which = delegates_sent
                value = 0
            }
        }
		random_country = {
            limit = {
                exists = yes
                OR = {
                    tag = WUR
                    tag = BAD
                    tag = BAV
                    tag = WRZ
                    tag = RHB
                    tag = HES
                    tag = NAS
                    tag = BRG
                    tag = COB
                    tag = MEI
                    tag = WEI
                    tag = SAX
                    tag = ANH
                    tag = LIP
                    tag = WST
                    tag = HEK
                    tag = MEC
                    tag = SGF
                }
            }
            country_event = 55001
        }
        set_global_flag = fed_unifying
        set_country_flag = fed_unifying
		ai_chance = {
            factor = 100
        }
    }
	
	   option = {
        name = "EVTOPTB55000"
        any_pop = {
            ideology = {
                value = liberal
                factor = 0.2
            }
        }
        any_pop = {
            militancy = 6
            consciousness = 4
        }
		ai_chance = {
            factor = 0
        }
    }
}

# Informing German States of the Frankfurt Assembly
country_event = {
    id = 55001
    title = "EVTNAME55001"
    desc = "EVTDESC55001"
    picture = "Unite"
	
	is_triggered_only = yes

    option = {
        name = "EVTOPTA55001"
        any_pop = {
            ideology = {
                value = liberal
                factor = 0.1
            }
        }
        any_pop = {
            militancy = 3
            consciousness = 2
        }
        set_country_flag = fed_unifying
    }
}

#9 Delegates Sent - There is a GP in the Rhine states
country_event = {
    id = 55002
    title = "EVTNAME55002"
    desc = "EVTDESC55002"
    picture = "Unite"

    trigger = {
        tag = RHB
        year = 1848 
        NOT = {
            exists = GER
            exists = NGF
            has_global_flag = federation_rejected
            has_global_flag = federation_accepted
			has_global_flag = rheinbund_alt_formation
        }

        FRA = {
            check_variable = {
                which = delegates_sent
                value = 9
            }
        }

        OR = {
            WUR = {
                is_greater_power = yes
            }
            BAD = {
                is_greater_power = yes
            }
            BAV = {
                is_greater_power = yes
            }
            WRZ = {
                is_greater_power = yes
            }
            RHB = {
                is_greater_power = yes
            }
            HES = {
                is_greater_power = yes
            }
            NAS = {
                is_greater_power = yes
            }
            BRG = {
                is_greater_power = yes
            }
            COB = {
                is_greater_power = yes
            }
            MEI = {
                is_greater_power = yes
            }
            WEI = {
                is_greater_power = yes
            }
            SAX = {
                is_greater_power = yes
            }
            ANH = {
                is_greater_power = yes
            }
            LIP = {
                is_greater_power = yes
            }
            WST = {
                is_greater_power = yes
            }
            HEK = {
                is_greater_power = yes
            }
            MEC = {
                is_greater_power = yes
            }
            SGF = {
                is_greater_power = yes
            }
        }
    }

    fire_only_once = yes

    mean_time_to_happen =  {
        months = 1
    }

    option = {
        name = "EVTOPTA55002"
        random_country = {
            limit = {
                exists = yes
                is_greater_power = yes
                OR = {
                    tag = WUR
                    tag = BAD
                    tag = BAV
                    tag = WRZ
                    tag = RHB
                    tag = HES
                    tag = NAS
                    tag = BRG
                    tag = COB
                    tag = MEI
                    tag = WEI
                    tag = SAX
                    tag = ANH
                    tag = LIP
                    tag = WST
                    tag = HEK
                    tag = MEC
                    tag = SGF
                }
            }
            country_event = 55003
        }
        }
}

# A Confed GP gets invitation
country_event = {
    id = 55003
    title = "EVTNAME55003"
    desc = "EVTDESC55003"
    major = yes

    is_triggered_only = yes

    option = {
        name = "EVTOPTA55003"
        prestige = -30

        add_accepted_culture = north_german
        add_accepted_culture = south_german
        political_reform = wealth_voting
        political_reform = population_equal_weight
        political_reform = yes_meeting
        political_reform = free_press
        political_reform = non_socialist
        political_reform = secret_ballots
        government = hms_government
        any_country = {
            limit = {
                OR = {
					has_country_flag = sent_delegate
					tag = RHB
				}
                NOT = {
                    tag = THIS
					ai = no
                }
            }
            annex_to = THIS
        }

        change_tag = RHB

        GER = {
            all_core = {
                limit = {
                    NOT = { OR = { is_core = PRU is_core = DZG } }
                    }
                add_core = RHB
            }
        }

        set_global_flag = federation_accepted

        any_country = {
            limit = {
                exists = yes
                OR = {
                    tag = WUR
                    tag = BAD
                    tag = BAV
                    tag = WRZ
                    tag = HES
                    tag = NAS
                    tag = BRG
                    tag = COB
                    tag = MEI
                    tag = WEI
                    tag = SAX
                    tag = ANH
                    tag = LIP
                    tag = WST
                    tag = HEK
                    tag = MEC
                    tag = SGF
                }
            }
            country_event = 55005
        }
        ai_chance = {
            factor = 80
        }
    }

    option = {
        name = "EVTOPTB55003"
        prestige = 15

        set_global_flag = federation_rejected
        ai_chance = {
            factor = 20
        }
    }
}

#9 Delegates Sent - There is NOT a GP in the Rhine states
country_event = {
    id = 55004
    title = "EVTNAME55004"
    desc = "EVTDESC55004"
    picture = "Unite"
	major = yes

    trigger = {
        tag = RHB
        year = 1848
        NOT = {
            exists = GER
            exists = NGF
            has_global_flag = federation_rejected
            has_global_flag = federation_accepted
			has_global_flag = rheinbund_alt_formation
        }
        FRA = {
            check_variable = {
                which = delegates_sent
                value = 9
            }
        }
        NOT = {
            OR = {
                WUR = {
                    is_greater_power = yes
                }
                BAD = {
                    is_greater_power = yes
                }
                BAV = {
                    is_greater_power = yes
                }
                WRZ = {
                    is_greater_power = yes
                }
                RHB = {
                    is_greater_power = yes
                }
                HES = {
                    is_greater_power = yes
                }
                NAS = {
                    is_greater_power = yes
                }
                BRG = {
                    is_greater_power = yes
                }
                COB = {
                    is_greater_power = yes
                }
                MEI = {
                    is_greater_power = yes
                }
                WEI = {
                    is_greater_power = yes
                }
                SAX = {
                    is_greater_power = yes
                }
                ANH = {
                    is_greater_power = yes
                }
                LIP = {
                    is_greater_power = yes
                }
                WST = {
                    is_greater_power = yes
                }
                HEK = {
                    is_greater_power = yes
                }
                MEC = {
                    is_greater_power = yes
                }
                SGF = {
                    is_greater_power = yes
                }
            }
        }
    }

    fire_only_once = yes

    mean_time_to_happen =  {
        months = 6
    }

    option = {
        name = "EVTOPTA55004"
		GER = {
            all_core = {
                limit = {
                    NOT = { OR = { is_core = PRU is_core = DZG is_core = SWE } }
                }

                add_core = RHB
            }
        }

        any_country = {
            limit = {
                has_country_flag = sent_delegate
                NOT = {
                    tag = THIS
					ai = no
                }
            }
            annex_to = RHB
        }

        RHB = {
            prestige = -100 #Gutter!
            add_accepted_culture = south_german
            add_accepted_culture = north_german
            political_reform = wealth_voting
            political_reform = population_equal_weight
            political_reform = yes_meeting
            political_reform = free_press
            political_reform = non_socialist
            political_reform = secret_ballots
            government = hms_government
        }

		#Removing this as this event will now have RHB consolidate itself, and Austria will get a chance to puppet after
        #create_alliance = RHB
        #diplomatic_influence = {
        #    who = RHB
        #    value = 300
        #}
		#
        #create_vassal = RHB
        set_global_flag = federation_accepted

        any_country = {
            limit = {
                exists = yes
                OR = {
                    tag = WUR
                    tag = BAD
                    tag = BAV
                    tag = WRZ
                    tag = HES
                    tag = NAS
                    tag = BRG
                    tag = COB
                    tag = MEI
                    tag = WEI
                    tag = SAX
                    tag = ANH
                    tag = LIP
                    tag = WST
                    tag = HEK
                    tag = MEC
                    tag = SGF
                }
            }
            country_event = 55005
        }
        ai_chance = {
            factor = 100
        }
    }

    option = {
        name = "EVTOPTB55004"
        set_global_flag = federation_rejected
        ai_chance = {
            factor = 0
        }
    }
}

#Other states offered choice to join the Fed
country_event = {
    id = 55005
    title = "EVTNAME55005"
    desc = "EVTDESC55005"
    picture = "threehurrahs"

    is_triggered_only = yes

    option = {
        name = "EVTOPTA55005"
        RHB = { inherit = THIS }
        ai_chance = {
            factor = 100
        }
    }

    option = {
        name = "EVTOPTB55005"
        prestige = 15
        any_pop = {
            militancy = 3
            consciousness = 2
        }

        ai_chance = {
            factor = 0
        }
    }
}

#Frankfurt Failure
country_event = {
    id = 55006
    title = "EVTNAME55006"
    desc = "EVTDESC55006"
    picture = "Upperhouse"

    trigger = {
		tag = RHB
        has_global_flag = fed_unifying
        NOT = {
            has_global_flag = frank_failed
        }

        year = 1850
        NOT = {
			has_global_flag = federation_accepted	
        }
    }

    mean_time_to_happen =  {
        months = 1
    }

    option = {
        name = "EVTOPTA55006"

        any_pop = {
            militancy = 3
            consciousness = 2
        }
		random_country = {
            limit = {
                exists = yes
                OR = {
                    tag = WUR
                    tag = BAD
                    tag = BAV
                    tag = WRZ
                    tag = HES
                    tag = NAS
                    tag = BRG
                    tag = COB
                    tag = MEI
                    tag = WEI
                    tag = SAX
                    tag = ANH
                    tag = LIP
                    tag = WST
                    tag = HEK
                    tag = MEC
                    tag = SGF
                }
            }
            country_event = 55007
        }
        set_global_flag = frank_failed
    }
}

#Frankfurt Failure
country_event = {
    id = 55007
    title = "EVTNAME55007"
    desc = "EVTDESC55007"
    picture = "Upperhouse"
	is_triggered_only = yes

    option = {
        name = "EVTOPTA55007"

        any_pop = {
            militancy = -3
            consciousness = -2
        }
    }
}
